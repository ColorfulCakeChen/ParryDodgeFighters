{
	"name": "Event_Sheet_Main",
	"events": [
		{
			"eventType": "include",
			"includeSheet": "Event_Sheet_Fighter"
		},
		{
			"eventType": "include",
			"includeSheet": "Event_Sheet_Functions"
		},
		{
			"eventType": "block",
			"conditions": [
				{
					"id": "on-start-of-layout",
					"objectClass": "System",
					"sid": 781989965292633
				}
			],
			"actions": [
				{
					"id": "set-eventvar-value",
					"objectClass": "System",
					"sid": 878408751130921,
					"parameters": {
						"variable": "Versus_Step_Current",
						"value": "Versus_Step_0_DownloadWeights_Begin"
					}
				},
				{
					"callFunction": "Fighter_KeyDownArray_init",
					"sid": 314394289555161,
					"parameters": [
						"0"
					]
				},
				{
					"callFunction": "Fighter_recreateAll",
					"sid": 452673687465620
				},
				{
					"id": "set-text",
					"objectClass": "RemainedTimer",
					"sid": 166746119972597,
					"parameters": {
						"text": "\"\""
					}
				},
				{
					"id": "set-world-gravity",
					"objectClass": "Fighter",
					"sid": 730058667078155,
					"behaviorType": "Physics",
					"parameters": {
						"gravity": "PhysicsGravity"
					}
				}
			],
			"sid": 834938499052826
		},
		{
			"eventType": "comment",
			"text": "Triggered every quarter of a sceond."
		},
		{
			"eventType": "block",
			"conditions": [
				{
					"id": "every-x-seconds",
					"objectClass": "System",
					"sid": 409861219020120,
					"parameters": {
						"interval-seconds": "QuarterSeconds"
					}
				}
			],
			"actions": [
				{
					"id": "set-text",
					"objectClass": "SpriteFont",
					"sid": 975794173567831,
					"disabled": true,
					"parameters": {
						"text": "SpriteFont.Text & \",\" & RemainedTimer.secondsCur"
					}
				}
			],
			"sid": 749524624108426,
			"children": [
				{
					"eventType": "comment",
					"text": "Wait for weights dowloading."
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "compare-eventvar",
							"objectClass": "System",
							"sid": 748005203853191,
							"parameters": {
								"variable": "Versus_Step_Current",
								"comparison": 0,
								"value": "Versus_Step_0_DownloadWeights_Begin"
							}
						}
					],
					"actions": [
						{
							"id": "set-text",
							"objectClass": "RemainedTimer",
							"sid": 864778163234747,
							"parameters": {
								"text": "\"\""
							}
						},
						{
							"callFunction": "VersusInfo_create",
							"sid": 261567665668592,
							"parameters": [
								"\"Loading.....................\"",
								"\"Loading.....................\"",
								"72",
								"44"
							]
						},
						{
							"id": "set-eventvar-value",
							"objectClass": "System",
							"sid": 346817543319802,
							"parameters": {
								"variable": "Versus_Step_Current",
								"value": "Versus_Step_1_DownloadWeights_Loading"
							}
						}
					],
					"sid": 859861743300847
				},
				{
					"eventType": "comment",
					"text": "Display versus info for Parent as alignment 0. (Weights have dowloaded.)"
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "compare-eventvar",
							"objectClass": "System",
							"sid": 463323331811047,
							"parameters": {
								"variable": "Versus_Step_Current",
								"comparison": 0,
								"value": "Versus_Step_2_DownloadWeights_End"
							}
						}
					],
					"actions": [
						{
							"callFunction": "VersusInfo_set",
							"sid": 543029118464152,
							"parameters": [
								"Versus_EntityNo",
								"Versus_Parent_GenerationNo",
								"Versus_Parent_WinCount",
								"\" \"",
								"Versus_Offspring_GenerationNo",
								"-1",
								"\" \"",
								"2"
							]
						},
						{
							"id": "set-eventvar-value",
							"objectClass": "System",
							"sid": 142010917529747,
							"parameters": {
								"variable": "Versus_Step_Current",
								"value": "Versus_Step_3_ParentAlignment0_Begin"
							}
						}
					],
					"sid": 237412093855034
				},
				{
					"eventType": "comment",
					"text": "Count down timer, restore energy and cool down controller gradually during fighting."
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "compare-eventvar",
							"objectClass": "System",
							"sid": 333781128702083,
							"parameters": {
								"variable": "Versus_Step_Current",
								"comparison": 0,
								"value": "Versus_Step_4_ParentAlignment0_Fighting"
							}
						},
						{
							"id": "compare-eventvar",
							"objectClass": "System",
							"sid": 273078630294887,
							"parameters": {
								"variable": "Versus_Step_Current",
								"comparison": 0,
								"value": "Versus_Step_7_ParentAlignment1_Fighting"
							}
						}
					],
					"actions": [
						{
							"id": "set-instvar-value",
							"objectClass": "RemainedTimer",
							"sid": 652111608592919,
							"parameters": {
								"instance-variable": "secondsCur",
								"value": "max( Self.secondsCur - QuarterSeconds, 0 )"
							}
						},
						{
							"callFunction": "RemainderTimer_Refresh",
							"sid": 124002064637575
						},
						{
							"callFunction": "Fighter_everyQuarterSeconds",
							"sid": 681109241784902
						}
					],
					"sid": 716711061859539,
					"children": [
						{
							"eventType": "comment",
							"text": "Fighting ends if any Fighter is kicked out or time runs out."
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "is-outside-layout",
									"objectClass": "Fighter",
									"sid": 915068713618218
								},
								{
									"id": "compare-instance-variable",
									"objectClass": "RemainedTimer",
									"sid": 834422478131122,
									"parameters": {
										"instance-variable": "secondsCur",
										"comparison": 3,
										"value": "0"
									}
								}
							],
							"actions": [
								{
									"callFunction": "VersusInfo_create",
									"sid": 149695613335528,
									"parameters": [
										"\"End...\"",
										"\"End...\"",
										"36",
										"44"
									]
								},
								{
									"type": "comment",
									"text": "!!! ...unfinished... who is alignment 0?"
								},
								{
									"callFunction": "VersusInfo_set",
									"sid": 236618131197999,
									"parameters": [
										"Versus_EntityNo",
										"Versus_Parent_GenerationNo",
										"Versus_Parent_WinCount",
										"\"Win\"",
										"Versus_Offspring_GenerationNo",
										"-1",
										"\"Lose\"",
										"2"
									]
								},
								{
									"id": "add-to-eventvar",
									"objectClass": "System",
									"sid": 855512054414137,
									"parameters": {
										"variable": "Versus_Step_Current",
										"value": "1"
									}
								}
							],
							"sid": 477270838320702,
							"children": [
								{
									"eventType": "comment",
									"text": "Flash to remind user which fighter is still in bounds (i.e. which is winer)."
								},
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "pick-all",
											"objectClass": "System",
											"sid": 220556001777599,
											"parameters": {
												"object": "Fighter"
											}
										},
										{
											"id": "is-outside-layout",
											"objectClass": "Fighter",
											"sid": 428635230142412,
											"isInverted": true
										}
									],
									"actions": [
										{
											"id": "flash",
											"objectClass": "FighterSkin",
											"sid": 586905900659069,
											"behaviorType": "Flash",
											"parameters": {
												"on-time": "0.25",
												"off-time": "0.25",
												"duration": "1"
											}
										}
									],
									"sid": 782882391397388
								}
							],
							"isOrBlock": true
						}
					],
					"isOrBlock": true
				}
			]
		},
		{
			"eventType": "block",
			"conditions": [
				{
					"id": "every-tick",
					"objectClass": "System",
					"sid": 566307689640938
				}
			],
			"actions": [
				{
					"id": "set-spraying",
					"objectClass": "FighterThrustParticles",
					"sid": 753034436906484,
					"parameters": {
						"state": "not-spraying"
					}
				},
				{
					"callFunction": "DrawingCanvas_Paint",
					"sid": 670822637032521
				}
			],
			"sid": 304644917695471,
			"children": [
				{
					"eventType": "comment",
					"text": "Energy restores boostly to remind user fighting begins."
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "compare-eventvar",
							"objectClass": "System",
							"sid": 277704417039841,
							"parameters": {
								"variable": "Versus_Step_Current",
								"comparison": 0,
								"value": "Versus_Step_3_ParentAlignment0_Begin"
							}
						},
						{
							"id": "compare-eventvar",
							"objectClass": "System",
							"sid": 661278438930147,
							"parameters": {
								"variable": "Versus_Step_Current",
								"comparison": 0,
								"value": "Versus_Step_6_ParentAlignment1_Begin"
							}
						}
					],
					"actions": [
						{
							"callFunction": "Fighter_EnergyCur_add_byPicked",
							"sid": 258514422285002,
							"parameters": [
								"Fighter.EnergyRestorePoints * Fighter.EnergyRestoreBoost"
							]
						}
					],
					"sid": 762323392034888,
					"isOrBlock": true
				},
				{
					"eventType": "comment",
					"text": "Fighting by Controller."
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "compare-eventvar",
							"objectClass": "System",
							"sid": 693860944608004,
							"parameters": {
								"variable": "Versus_Step_Current",
								"comparison": 0,
								"value": "Versus_Step_4_ParentAlignment0_Fighting"
							}
						},
						{
							"id": "compare-eventvar",
							"objectClass": "System",
							"sid": 171770542281659,
							"parameters": {
								"variable": "Versus_Step_Current",
								"comparison": 0,
								"value": "Versus_Step_7_ParentAlignment1_Fighting"
							}
						}
					],
					"actions": [
						{
							"type": "comment",
							"text": "Anti the gravity completely."
						},
						{
							"id": "apply-force",
							"objectClass": "Fighter",
							"sid": 614209133798029,
							"disabled": true,
							"behaviorType": "Physics",
							"parameters": {
								"force-x": "0",
								"force-y": "-Self.Physics.Mass * GameToPhysicsRatio * PhysicsGravity",
								"image-point": "0"
							}
						},
						{
							"callFunction": "Fighter_act_byKeyDownArray",
							"sid": 209335001198766,
							"parameters": [
								"0",
								"0",
								"0",
								"0",
								"0",
								"0",
								"0"
							]
						}
					],
					"sid": 796995777013480,
					"isOrBlock": true
				},
				{
					"eventType": "comment",
					"text": "Energy drops down fast to remind user which fighter is loser (i.e. kicked out)."
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "evaluate-expression",
							"objectClass": "System",
							"sid": 159631707182764,
							"parameters": {
								"value": "( Versus_Step_Current = Versus_Step_5_ParentAlignment0_End ) | ( Versus_Step_Current = Versus_Step_8_ParentAlignment1_End )"
							}
						},
						{
							"id": "is-outside-layout",
							"objectClass": "Fighter",
							"sid": 606361844834994
						}
					],
					"actions": [
						{
							"callFunction": "Fighter_EnergyCur_add_byPicked",
							"sid": 994245170615541,
							"parameters": [
								"- ( Fighter.EnergyRestorePoints * Fighter.EnergyRestoreBoost )"
							]
						}
					],
					"sid": 477124077866881
				}
			]
		},
		{
			"eventType": "block",
			"conditions": [
				{
					"id": "on-any-key-pressed",
					"objectClass": "Keyboard",
					"sid": 654434314218510
				},
				{
					"id": "compare-boolean-eventvar",
					"objectClass": "System",
					"sid": 669643940846162,
					"parameters": {
						"variable": "Fighter_PlayerControllable"
					}
				}
			],
			"actions": [
				{
					"id": "set-text",
					"objectClass": "SpriteFont",
					"sid": 916318754263570,
					"disabled": true,
					"parameters": {
						"text": "SpriteFont.Text & \",\" & Keyboard.TypedKey & \"(\" & Keyboard.LastKeyCode & \")\""
					}
				},
				{
					"id": "set-at-x",
					"objectClass": "Fighter_KeyDownArray",
					"sid": 351776763413782,
					"parameters": {
						"x": "Keyboard.LastKeyCode",
						"value": "1"
					}
				}
			],
			"sid": 683172087657411
		},
		{
			"eventType": "block",
			"conditions": [
				{
					"id": "on-any-key-released",
					"objectClass": "Keyboard",
					"sid": 460768446080213
				},
				{
					"id": "compare-boolean-eventvar",
					"objectClass": "System",
					"sid": 669643940846162,
					"parameters": {
						"variable": "Fighter_PlayerControllable"
					}
				}
			],
			"actions": [
				{
					"id": "set-text",
					"objectClass": "SpriteFont",
					"sid": 327931139660854,
					"disabled": true,
					"parameters": {
						"text": "SpriteFont.Text & \",\" & Keyboard.TypedKey & \"(\" & Keyboard.LastKeyCode & \")\""
					}
				},
				{
					"id": "set-at-x",
					"objectClass": "Fighter_KeyDownArray",
					"sid": 526912348973221,
					"parameters": {
						"x": "Keyboard.LastKeyCode",
						"value": "0"
					}
				}
			],
			"sid": 510208931923954
		},
		{
			"eventType": "block",
			"conditions": [
				{
					"id": "on-key-pressed",
					"objectClass": "Keyboard",
					"sid": 523127364989883,
					"parameters": {
						"key": 70
					}
				},
				{
					"id": "is-fullscreen",
					"objectClass": "Browser",
					"sid": 162315791343053,
					"isInverted": true
				}
			],
			"actions": [
				{
					"id": "request-fullscreen",
					"objectClass": "Browser",
					"sid": 652552188786193,
					"parameters": {
						"mode": "stretch-letterbox-scale",
						"navigation-ui": "auto"
					}
				}
			],
			"sid": 199105531134504
		},
		{
			"eventType": "block",
			"conditions": [
				{
					"id": "on-destroyed",
					"objectClass": "VersusInfo",
					"sid": 978013334992837
				}
			],
			"actions": [],
			"sid": 638178211372008,
			"children": [
				{
					"eventType": "comment",
					"text": "Fighting is about to begin."
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "evaluate-expression",
							"objectClass": "System",
							"sid": 180661957578694,
							"parameters": {
								"value": "( Versus_Step_Current = Versus_Step_3_ParentAlignment0_Begin ) | ( Versus_Step_Current = Versus_Step_6_ParentAlignment1_Begin )"
							}
						}
					],
					"actions": [
						{
							"id": "set-instvar-value",
							"objectClass": "RemainedTimer",
							"sid": 343527119359616,
							"parameters": {
								"instance-variable": "secondsCur",
								"value": "Self.secondsMax"
							}
						},
						{
							"type": "comment",
							"text": "Full energy since fighting begins."
						},
						{
							"id": "set-instvar-value",
							"objectClass": "Fighter",
							"sid": 166042511798280,
							"parameters": {
								"instance-variable": "EnergyCur",
								"value": "Self.EnergyMax"
							}
						},
						{
							"type": "comment",
							"text": "Flash to remind user fighting begins."
						},
						{
							"id": "flash",
							"objectClass": "FighterSkin",
							"sid": 132136889867453,
							"behaviorType": "Flash",
							"parameters": {
								"on-time": "0.25",
								"off-time": "0.25",
								"duration": "1"
							}
						},
						{
							"id": "add-to-eventvar",
							"objectClass": "System",
							"sid": 340528663483064,
							"parameters": {
								"variable": "Versus_Step_Current",
								"value": "1"
							}
						}
					],
					"sid": 304654058250143
				},
				{
					"eventType": "comment",
					"text": "Display versus info for Parent as alignment1. (Fighting has ended for Parent as alignment 0.)"
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "else",
							"objectClass": "System",
							"sid": 582631744765729
						},
						{
							"id": "compare-eventvar",
							"objectClass": "System",
							"sid": 918507274131851,
							"parameters": {
								"variable": "Versus_Step_Current",
								"comparison": 0,
								"value": "Versus_Step_5_ParentAlignment0_End"
							}
						}
					],
					"actions": [
						{
							"type": "comment",
							"text": "??? Exchange Fighters' alignment."
						},
						{
							"callFunction": "Fighter_recreateAll",
							"sid": 161261870102206
						},
						{
							"id": "set-text",
							"objectClass": "RemainedTimer",
							"sid": 426652542271501,
							"parameters": {
								"text": "\"\""
							}
						},
						{
							"callFunction": "VersusInfo_create",
							"sid": 404439473475760,
							"parameters": [
								"\"Loading.....................\"",
								"\"Loading.....................\"",
								"72",
								"44"
							]
						},
						{
							"callFunction": "VersusInfo_set",
							"sid": 480249112589473,
							"parameters": [
								"Versus_EntityNo",
								"Versus_Offspring_GenerationNo",
								"-1",
								"\" \"",
								"Versus_Parent_GenerationNo",
								"Versus_Parent_WinCount",
								"\" \"",
								"2"
							]
						},
						{
							"id": "set-eventvar-value",
							"objectClass": "System",
							"sid": 100910388754314,
							"parameters": {
								"variable": "Versus_Step_Current",
								"value": "Versus_Step_6_ParentAlignment1_Begin"
							}
						}
					],
					"sid": 790678400660388
				},
				{
					"eventType": "comment",
					"text": "Fighting ends for Parent is alignment 1."
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "else",
							"objectClass": "System",
							"sid": 416663439108638
						},
						{
							"id": "compare-eventvar",
							"objectClass": "System",
							"sid": 794153777846244,
							"parameters": {
								"variable": "Versus_Step_Current",
								"comparison": 0,
								"value": "Versus_Step_8_ParentAlignment1_End"
							}
						}
					],
					"actions": [
						{
							"type": "comment",
							"text": "??? Another versus."
						},
						{
							"id": "set-eventvar-value",
							"objectClass": "System",
							"sid": 478573945802936,
							"disabled": true,
							"parameters": {
								"variable": "Versus_Step_Current",
								"value": "Versus_Step_0_DownloadWeights_Begin"
							}
						},
						{
							"id": "restart-layout",
							"objectClass": "System",
							"sid": 993181863455677
						}
					],
					"sid": 130451988170745
				}
			]
		},
		{
			"eventType": "comment",
			"text": "For test VersusInfo_set()"
		},
		{
			"eventType": "block",
			"conditions": [
				{
					"id": "on-key-pressed",
					"objectClass": "Keyboard",
					"sid": 261066947214651,
					"parameters": {
						"key": 50
					}
				},
				{
					"id": "compare-eventvar",
					"objectClass": "System",
					"sid": 721201209461614,
					"parameters": {
						"variable": "Versus_Step_Current",
						"comparison": 0,
						"value": "Versus_Step_1_DownloadWeights_Loading"
					}
				}
			],
			"actions": [
				{
					"id": "set-eventvar-value",
					"objectClass": "System",
					"sid": 828659472112741,
					"parameters": {
						"variable": "Versus_Step_Current",
						"value": "Versus_Step_2_DownloadWeights_End"
					}
				}
			],
			"sid": 126876042714282
		}
	],
	"sid": 215625391285548
}